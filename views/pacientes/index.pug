extends ../layout

block content
  h1 Lista de Pacientes

  // Filtro por nombre
  form(method="GET", class="form-box form-flex", style="margin-bottom: 20px; gap: 10px; max-width: 500px;")
    input(type="text", name="nombre", placeholder="Buscar por nombre", value=nombreBuscado || '')
    button(type="submit", class="button") Buscar

  a(href="/pacientes/crear", class="button button-primary") ➕ Nuevo Paciente

  if pacientes.length
    table.listado-ventas(style="max-width: 900px; margin: 40px auto;")
      thead
        tr
          th Nombre
          th Especie
          th Raza
          th Edad
          th Dueño
          th Acciones
      tbody
        each paciente in pacientes
          tr
            td(style="text-align: center")= paciente.nombre
            td(style="text-align: center")= paciente.especie
            td(style="text-align: center")= paciente.raza
            td(style="text-align: center")= paciente.edad
            td(style="text-align: center")= paciente.responsable.nombre
            td(style="text-align: right; white-space: nowrap;")
              a(href=`/pacientes/${paciente._id}`, class="button button-small", style="margin-right: 6px;") 👁️ Ver
              a(href=`/pacientes/${paciente._id}/editar`, class="button button-small", style="margin-right: 6px;") ✏️ Editar
              form(method="POST", action=`/pacientes/${paciente._id}?_method=DELETE`, style="display:inline;")
                button(type="submit", class="button delete button-small", onclick="return confirm('¿Estás seguro de que querés eliminar este paciente?')") 🗑️ Eliminar

  else
    p.sin-resultados No hay pacientes registrados.
